<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Actions
  #

At this point you should have public web page for the workshop built off your repository and
hosted under your GitHub handle. This section of the workshop will

break down the actions currently in the CI/CD workflow and job.
guide you through two kinds of custom actions





  Back





  Next








  Current Actions
  #

The CI/CD job currently has two kinds of actions defined"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://carsonoid.github.io/workshop-learn-github-actions/workshop/4-actions/"><meta property="og:site_name" content="Learn GitHub Actions"><meta property="og:title" content="4 - Actions"><meta property="og:description" content="Actions # At this point you should have public web page for the workshop built off your repository and hosted under your GitHub handle. This section of the workshop will
break down the actions currently in the CI/CD workflow and job. guide you through two kinds of custom actions Back Next Current Actions # The CI/CD job currently has two kinds of actions defined"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="workshop"><title>4 - Actions | Learn GitHub Actions</title>
<link rel=icon href=/workshop-learn-github-actions/favicon.png><link rel=manifest href=/workshop-learn-github-actions/manifest.json><link rel=canonical href=https://carsonoid.github.io/workshop-learn-github-actions/workshop/4-actions/><link rel=stylesheet href=/workshop-learn-github-actions/book.min.427088125db4cefb2519ec027d90ee7b7f632ed1c06b876d8672e8d426de9f20.css integrity="sha256-QnCIEl20zvslGewCfZDue39jLtHAa4dthnLo1CbenyA=" crossorigin=anonymous><script defer src=/workshop-learn-github-actions/fuse.min.js></script><script defer src=/workshop-learn-github-actions/en.search.min.1265d07e4c63f0f51dd19494e8ea490a4370c57d6603bfa88a2322e4c64e6543.js integrity="sha256-EmXQfkxj8PUd0ZSU6OpJCkNwxX1mA7+oiiMi5MZOZUM=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/workshop-learn-github-actions/><span>Learn GitHub Actions</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/workshop-learn-github-actions/workshop/>Workshop</a><ul><li><a href=/workshop-learn-github-actions/workshop/preamble/>Preamble</a></li><li><a href=/workshop-learn-github-actions/workshop/1-create-repo/>1 - Create the Repository</a></li><li><a href=/workshop-learn-github-actions/workshop/2-introduction/>2 - Introducing GitHub Actions</a><ul><li><a href=/workshop-learn-github-actions/workshop/2-introduction/1-steps/>1 - Steps</a></li><li><a href=/workshop-learn-github-actions/workshop/2-introduction/2-jobs/>2 - Jobs</a></li><li><a href=/workshop-learn-github-actions/workshop/2-introduction/3-workflows/>3 - Workflows</a></li></ul></li><li><a href=/workshop-learn-github-actions/workshop/3-first-workflow/>3 - First Workflow</a></li><li><a href=/workshop-learn-github-actions/workshop/4-actions/ class=active>4 - Actions</a></li></ul></li><li><a href=/workshop-learn-github-actions/credits/>Credits</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/workshop-learn-github-actions/svg/menu.svg class=book-icon alt=Menu></label><h3>4 - Actions</h3><label for=toc-control><img src=/workshop-learn-github-actions/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#current-actions>Current Actions</a><ul><li><a href=#3rd-party-actions>3rd Party Actions</a></li><li><a href=#custom-shell-actions>Custom &ldquo;shell&rdquo; actions</a></li></ul></li><li><a href=#new-actions>New Actions</a><ul><li><a href=#composite-actions>Composite Actions</a><ul><li><a href=#build-it>Build it</a></li><li><a href=#use-it>Use it</a></li></ul></li><li><a href=#javascript-actions>Javascript Actions</a></li><li><a href=#docker-container-actions>Docker Container Actions</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=actions>Actions
<a class=anchor href=#actions>#</a></h1><p>At this point you should have public web page for the workshop built off your repository and
hosted under your GitHub handle. This section of the workshop will</p><ul><li>break down the actions currently in the <code>CI/CD</code> workflow and job.</li><li>guide you through two kinds of custom actions</li></ul><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h2 id=current-actions>Current Actions
<a class=anchor href=#current-actions>#</a></h2><p>The <code>CI/CD</code> job currently has two kinds of actions defined</p><ul><li><a href=https://docs.github.com/en/actions/writing-workflows/choosing-what-your-workflow-does/using-pre-written-building-blocks-in-your-workflow#overview>3rd Party Actions</a></li><li>Custom &ldquo;shell&rdquo; actions</li></ul><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=3rd-party-actions>3rd Party Actions
<a class=anchor href=#3rd-party-actions>#</a></h3><p>These are actions that are defined in other GitHub Repositories. They encapsulate a
specific behavior or step and can often be very complex behind the scenes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=custom-shell-actions>Custom &ldquo;shell&rdquo; actions
<a class=anchor href=#custom-shell-actions>#</a></h3><p>These are actions that are defined entirely in the workflow step itself. They run using the default shell of the runner
unless <code>shell</code> is specified.</p><p>It is common to use yaml multiline strings to put relatively long scripts into the action directly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    # there is no built-in env variable for the repo name without owner, so we have to parse it out
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    REPO_NAME=$(echo &#34;${GITHUB_REPOSITORY}&#34; | cut -d&#39;/&#39; -f2)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    hugo --minify -b &#34;https://${GITHUB_REPOSITORY_OWNER}.github.io/$REPO_NAME/&#34;</span>
</span></span></code></pre></div><p>These kinds of actions are infinitely flexible but can be highly dependent on the runner and workflow environment.
Shell scripting is also has a lot of potential pitfalls and easy mistakes that can be made.</p><p>Never the less: it is a very common kind of action to use and is often &ldquo;just enough&rdquo; to get work done while incurring almost
no overhead.</p><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h2 id=new-actions>New Actions
<a class=anchor href=#new-actions>#</a></h2><p>There are two more types of actions that can be very useful:</p><ul><li><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-composite-action>Composite Actions</a></li><li><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-javascript-action>Javascript Actions</a></li><li><a href=https://docs.github.com/en/actions/sharing-automations/creating-actions/creating-a-docker-container-action>Docker Container Actions</a></li></ul><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=composite-actions>Composite Actions
<a class=anchor href=#composite-actions>#</a></h3><p>Composite Actions are a way to combine one or more other actions into a single unit. They are often used to automate complex behaviors into a more streamlined interface.</p><p>Creating and using a new Composite Action locally is as easy as creating a new directory and writing an <code>action.yaml</code> file.</p><h4 id=build-it>Build it
<a class=anchor href=#build-it>#</a></h4><p>To define a new custom composite action: create a new file at <code>.github/actions/build/action.yaml</code> with the content below. You might notice that this we are simply moving the <code>Setup Hugo</code> and <code>Build</code> steps from the original workflow. That is true, but we have now made our own &ldquo;build&rdquo; abstraction that is easier to re-use and simplifies the main workflow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Build&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#e6db74>&#39;Build the workshop web assets&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>runs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>using</span>: <span style=color:#e6db74>&#34;composite&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v3</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>shell</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        # there is no built-in env variable for the repo name without owner, so we have to parse it out
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        REPO_NAME=$(echo &#34;${GITHUB_REPOSITORY}&#34; | cut -d&#39;/&#39; -f2)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        hugo --minify -b &#34;https://${GITHUB_REPOSITORY_OWNER}.github.io/$REPO_NAME/&#34;</span>
</span></span></code></pre></div><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h4 id=use-it>Use it
<a class=anchor href=#use-it>#</a></h4><p>Then reference it in a job by using a local path reference after checkout.</p><p>You can simply remove the old <code>Setup Hugo</code> and <code>Build</code> steps from <code>.github/workflows/ci-cd.yaml</code> and replace them with the new action.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>./.github/actions/build</span>
</span></span></code></pre></div><blockquote class="book-hint info">You might notice that using a custom action is a lot like using a 3rd party action.<br><br>That's because 3rd party actions are simply custom actions that have been given dedicated repositories. All 3rd party actions that you use are either composite actions or javascript actions that are simply hosted in a dedicated repository instead of a directory in your own repository.</blockquote><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=javascript-actions>Javascript Actions
<a class=anchor href=#javascript-actions>#</a></h3><a rel=noopener class="book-btn prevSegment">Back
</a><a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=docker-container-actions>Docker Container Actions
<a class=anchor href=#docker-container-actions>#</a></h3><a rel=noopener class="book-btn prevSegment">Back</a><div class=pagebreak></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#current-actions>Current Actions</a><ul><li><a href=#3rd-party-actions>3rd Party Actions</a></li><li><a href=#custom-shell-actions>Custom &ldquo;shell&rdquo; actions</a></li></ul></li><li><a href=#new-actions>New Actions</a><ul><li><a href=#composite-actions>Composite Actions</a><ul><li><a href=#build-it>Build it</a></li><li><a href=#use-it>Use it</a></li></ul></li><li><a href=#javascript-actions>Javascript Actions</a></li><li><a href=#docker-container-actions>Docker Container Actions</a></li></ul></li></ul></nav></div></aside></main><script>for(var parent,style,children,j,childStyle,nextSegments,prevSegment,code=document.querySelectorAll("code.language-bash"),i=0;i<code.length;i++)parent=code[i].parentElement,style=parent.getAttribute("style"),style==null&&(style=""),parent.setAttribute("style",style+";font-size: large;border: 1px solid #404239; filter: drop-shadow(0 0 0.5rem #404239);");for(code=document.querySelectorAll("code.language-txt"),i=0;i<code.length;i++){parent=code[i].parentElement,style=parent.getAttribute("style"),style==null&&(style=""),parent.setAttribute("style",style+";background-color: #f5f5f5; color: #333");for(children=code[i].querySelectorAll("[style]"),j=0;j<children.length;j++)childStyle=children[j].getAttribute("style"),childStyle.indexOf("background-color")>-1&&(console.log("found background-color"),childStyle=childStyle+";background-color: #ddd; color: #333",children[j].setAttribute("style",childStyle))}get_next_heading=function(e){for(var t=e.nextElementSibling;t;){if(t.tagName=="H1"||t.tagName=="H2"||t.tagName=="H3"||t.tagName=="H4"||t.tagName=="H5"||t.tagName=="H6")return t;t=t.nextElementSibling}return null};for(nextSegments=document.getElementsByClassName("nextSegment"),i=0;i<nextSegments.length;i++){let n=nextSegments[i],e=get_next_heading(n);if(e==null)break;n.addEventListener("click",function(){e.scrollIntoView(),e.scrollIntoView(),window.location.hash=e.id});let t=e.innerText;t.endsWith(" #")&&(t=t.substring(0,t.length-2)),n.innerText=n.innerText+" ("+t+")"}for(prevSegment=document.getElementsByClassName("prevSegment"),i=0;i<prevSegment.length;i++)prevSegment[i].addEventListener("click",function(){console.log("clicked");for(var e,t=this.previousElementSibling;t;){if(console.log(t),t.classList.contains("pagebreak"))for(e=t.previousElementSibling;e;){if(e.tagName=="H1"||e.tagName=="H2"||e.tagName=="H3"||e.tagName=="H4"||e.tagName=="H5"||e.tagName=="H6"){e.scrollIntoView(),window.location.hash=e.id;return}e=e.previousElementSibling}t=t.previousElementSibling}})</script></body></html>